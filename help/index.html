<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="Davide " />
        <title>D&D Character Sheet</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="../assets/favicon.ico" />
        <!-- VUE JS CDN-->
        <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14"></script>
        <!-- Custom Google font-->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@100;200;300;400;500;600;700;800;900&amp;display=swap" rel="stylesheet" />
        <!-- Bootstrap icons-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="../css/styles.css" rel="stylesheet" />
        <link href="../css/dndstyles.css" rel="stylesheet" />
        <link href="../css/modal.css" rel="stylesheet" />
        <!-- MODAL -->
        <script type="text/x-template" id="modal-template">
            <transition name="modal">
              <div class="modal-mask">
                <div class="modal-wrapper">
                  <div class="modal-container card  shadow rounded-4 border-0 mb-5">
      
                    <div class="modal-header Ã¬">
                        <i class="bi bi-x-circle-fill clickable fw-bolder text-primary navbar-brand"  @click="$emit('close')"> </i>
                      <slot name="header">
                      </slot>
                    </div>

                    <div>
                        <slot name="school">
                        </slot>
                    </div>
      
                    <div class="modal-body">
                      <slot name="body">
                      </slot>
                    </div>

                  </div>
                </div>
              </div>
            </transition>
          </script>
          <!--  -->
    </head>
    <body class="d-flex flex-column h-100">
        <main class="flex-shrink-0" id="vueContainer">
            <div id = overlay class = "onlyOnLargerScreens" v-if="!loading">
                <div class = "btn btn-primary btn-lg px-3 py-3 me-sm-3 fs-6 fw-bolder sidebutton" @click = "location.href='#stats'">
                    <i class="bi bi-clipboard-data"></i>
                </div>
                <div class = "btn btn-primary btn-lg px-3 py-3 me-sm-3 fs-6 fw-bolder sidebutton" @click = "location.href='#combat'">
                    <i class="bi bi-shield-shaded"></i>
                </div>
                <div class = "btn btn-primary btn-lg px-3 py-3 me-sm-3 fs-6 fw-bolder sidebutton" @click = "location.href='#inventory'">
                    <i class="bi bi-backpack2"></i>
                </div>
                <div class = "btn btn-primary btn-lg px-3 py-3 me-sm-3 fs-6 fw-bolder sidebutton" @click = "location.href='#features'">
                    <i class="bi bi-columns-gap"></i>
                </div>
                <div class = "btn btn-primary btn-lg px-3 py-3 me-sm-3 fs-6 fw-bolder sidebutton" @click = "location.href='#spells'">
                    <i class="bi bi-magic"></i>
                </div>
            </div>
            <!-- Navigation-->
            <nav class="navbar navbar-expand-lg navbar-light bg-white py-3">
                <i class="bi bi-x-circle-fill clickable fw-bolder text-primary navbar-brand exit" @click="location.href = 'https://davideborra.github.io/'"></i>
                <div class="container px-5" v-if="!loading">
                    <div class = pginfo>
                        <input readonly = "true"type ="text" class="fw-bolder text-primary navbar-brand" id = "pgname" v-model="pg.name" @input="updated = true;"></input>
                        <label for = "pglevel" class= "fw-bolder text-primary navbar-brand">Lv. </label><input readonly = "true"type ="number" class="fw-bolder text-primary navbar-brand" id = "pglevel" v-model="pg.level" @input="updated = true;"></input>
                        <input readonly = "true"type ="text" class="fw-bolder text-primary navbar-brand" id = "pgalign" v-model="pg.alignment"  @input="updated = true;"></input>
                    </div>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav ms-auto mb-2 mb-lg-0 small fw-bolder">
                            <li class="nav-item clickable"><a class="nav-link" @click = "">Load</a></li>
                            <li class="nav-item clickable"><a class="nav-link" @click="">Save</a></li>
                            <li class="nav-item clickable"><a class="nav-link" @click = "">New</a></li>
                            <li class="nav-item clickable"><a class="nav-link" href = "../">Back</a></li>
                        </ul>
                    </div>
                </div>
            </nav>
            <div class = pageContainer v-if= "!loading">
                <div class="card overflow-hidden shadow rounded-4 border-0 mb-5 helpCard">
                    <div class="card-body p-0">
                        <div class="p-4">
                            <h4 class="fw-bolder text-gradient">Introduction</h4>
                            This is an automated character sheet for Dungeons and Dragons 5e, developed to help manage complex characters and automate some calculations. This page is meant to help new users familiarise with the website and its wide amount of features. If you find a bug, please report it by <a href="https://davideborra.github.io/index.html#contact">contacting me directly</a> or <a href="https://github.com/davideborra/DnDsheet/issues">reporting an issue on GitHub</a>.
                        </div>
                    </div>
                </div>
                <div class="card overflow-hidden shadow rounded-4 border-0 mb-5 helpCard">
                    <div class="card-body p-0">
                        <div class="p-4">
                            <div class="d-flex" style = "align-items: center;">
                                <div class="badge bg-gradient-primary-to-secondary text-white mb-4" style="margin: 0.5rem 0.5rem !important;"><div class="text-uppercase">Help</div></div><h4 class="fw-bolder">The header</h4>
                            </div>
                            
                            The header contains the primary informations about your character: name, level and alignment, which can be easily edited by clicking on them. Here are located also the main controls for the website:
                            <ul>
                                <li>
                                    Load: opens the loading screen, which has two modes: the normal one for chromium-based browsers and the legacy one for all other browsers.
                                </li>
                                <li>
                                    Save: if the loaded is a newly created one or the website is in legacy-mode, this button downloads an edited version of it, meanwhile if you are using a chromium-based web browser and you uploaded the file from your device, this option updates the file directly on your device.
                                </li>
                                <li>
                                    New: creates a new blank character
                                </li>
                                <li>
                                    Help: opens this screen
                                </li>
                            </ul>
                            The <i class="bi bi-x-circle-fill fw-bolder text-primary navbar-brand exit" style="margin: 0;"></i> button on the top left corner closes this website and redirects to <a href="http://davideborra.github.io">davideborra.github.io</a>.

                        </div>
                    </div>
                </div>
                
                <!-- STATS CARD -->
                <div class="card overflow-hidden shadow rounded-4 border-0 mb-5" id = "stats">
                    <div class="card-body p-0">
                        <div class="p-5">
                            <h2 class="fw-bolder">Stats</h2>
                            <div class="card overflow-hidden shadow rounded-4 border-0 mb-5 helpCard">
                                <div class="card-body p-0">
                                    <div class="p-4">
                                        <div class="d-flex" style = "align-items: center;">
                                            <div class="badge bg-gradient-primary-to-secondary text-white mb-4" style="margin: 0.5rem 0.5rem !important;"><div class="text-uppercase">Help</div></div><h4 class="fw-bolder">Stats</h4>
                                        </div>
                                        
                                        Each box contains one of the six main stats in Dungeons and Dragons and its related modifier. The stats can be edited by clicking on the number, while the modifier is automatically calculated. Clicking on the modifier setups the dice roller in the footer to roll an ability check for that specific stat, without considering any proficiency.

                                    </div>
                                </div>
                            </div>
                            <div class="d-flex-card align-items-center statsContainer">
                                <div class = "card overflow-hidden shadow rounded-4 border-0 mb-5 statsCard">
                                    Strength
                                    <input readonly = "true"class="statvalue noarrows" v-model="pg.stats.str" type ="number" @input="updated = true;"></input>
                                    <div class="statmodifier clickable" @click="setRollString('1d20'+nozero(modifier(pg.stats.str)))">{{modifier(pg.stats.str)}}</div>
                                </div>
                                <div class = "card overflow-hidden shadow rounded-4 border-0 mb-5 statsCard">
                                    Dexterity
                                    <input readonly = "true"class="statvalue noarrows" v-model="pg.stats.dex" type ="number" @input="updated = true;"></input>
                                    <div class="statmodifier" @click="setRollString('1d20'+nozero(modifier(pg.stats.dex)))">{{modifier(pg.stats.dex)}}</div>
                                </div>
                                <div class = "card overflow-hidden shadow rounded-4 border-0 mb-5 statsCard">
                                    Constitution    
                                    <input readonly = "true"class="statvalue noarrows" v-model="pg.stats.con" type ="number" @input="updated = true;"></input>
                                    <div class="statmodifier" @click="setRollString('1d20'+nozero(modifier(pg.stats.con)))">{{modifier(pg.stats.con)}}</div>
                                </div>
                                <div class = "card overflow-hidden shadow rounded-4 border-0 mb-5 statsCard">
                                    Intelligence
                                    <input readonly = "true"class="statvalue noarrows" v-model="pg.stats.int" type ="number" @input="updated = true;"></input>
                                    <div class="statmodifier" @click="setRollString('1d20'+nozero(modifier(pg.stats.int)))">{{modifier(pg.stats.int)}}</div>
                                </div>
                                <div class = "card overflow-hidden shadow rounded-4 border-0 mb-5 statsCard">
                                    Wisdom
                                    <input readonly = "true"class="statvalue noarrows" v-model="pg.stats.wis" type ="number" @input="updated = true;"></input>
                                    <div class="statmodifier" @click="setRollString('1d20'+nozero(modifier(pg.stats.wis)))">{{modifier(pg.stats.wis)}}</div>
                                </div>
                                <div class = "card overflow-hidden shadow rounded-4 border-0 mb-5 statsCard">
                                    Charisma
                                    <input readonly = "true"class="statvalue noarrows" v-model="pg.stats.cha" type ="number" @input="updated = true;"></input>
                                    <div class="statmodifier" @click="setRollString('1d20'+nozero(modifier(pg.stats.cha)))">{{modifier(pg.stats.cha)}}</div>
                                </div>
                            </div>
                            
                            <div class="card overflow-hidden shadow rounded-4 border-0 mb-5 helpCard">
                                    <div class="card-body p-0">
                                        <div class="p-4">
                                            <div class="d-flex" style = "align-items: center;">
                                                <div class="badge bg-gradient-primary-to-secondary text-white mb-4" style="margin: 0.5rem 0.5rem !important;"><div class="text-uppercase">Help</div></div><h4 class="fw-bolder">Proficiency, Saving Throws and Ability Checks</h4>
                                            </div>
                                            The proficiency bonus can be inputed directly as any other stats, and influences the modifiers of any stat in which the character is proficient. To specify that a character is proficient in a specific stat, select it from the list and click once (or twice for expertise) on the circle appeared on the right. To remove the proficiency, click again on the same circle. For now ability checks are available only in Italian (sorry!). Clicking on the modifier setups the dice roller to roll a d20 with that specific modifier.
                                        </div>
                                    </div>
                                </div>
                            <div class = "d-flex-card align-items-center abilityContainer">
                                <div class = "card overflow-hidden shadow rounded-4 border-0 mb-5 statsCard">
                                    Proficiency Bonus
                                    <input readonly = "true"class="statvalue" v-model="pg.compBonus" @input="updated = true;"></input>
                                </div>

                                <div class = "card overflow-hidden shadow rounded-4 border-0 mb-5 dropdownCard">
                                    Saving Throws
                                    <div class="dropdownContainer">
                                        <input readonly = "true"class="comp" list="Saving_throws" placeholder="Saving Throw" v-model="selected_ts">
                                        <datalist id="Saving_throws">
                                            <select multiple size=6 >
                                            <option v-for="stat in pg.ts" :value="stat_name(stat.id)" >{{stat_name(stat.id)}}
                                            </select>
                                        </datalist> 
                                        <i class="bi bi-circle clickable" v-if="select_ts(selected_ts).image==0" @click="proficiencyST()"></i>
                                        <i class="bi bi-circle-fill cliackable" v-if="select_ts(selected_ts).image==1" @click="proficiencyST()"></i>
                                        <b class="statmodifier" @click="setRollString('1d20'+nozero(tsModifier()))">
                                            {{tsModifier()}}
                                        </b>
                                    </div>
                                </div>

                                <div class = "card overflow-hidden shadow rounded-4 border-0 mb-5 dropdownCard">
                                    Ability Checks
                                    <div class="dropdownContainer">
                                        <input readonly = "true"class="comp" list="ability_checks" placeholder="Ability Check" v-model="selected_skill">
                                        <datalist id="ability_checks">
                                            <select>
                                                <option v-for="(skill,index) in pg.skills" :value="skill.label">{{skill.label}}
                                            </select>
                                        </datalist> 
                                        <i class="bi bi-circle clickable" v-if="select_skill(selected_skill).image==0" @click="proficiencySkill()"></i>
                                        <i class="bi bi-circle-fill clickable" v-if="select_skill(selected_skill).image==1" @click="proficiencySkill()"></i>
                                        <i class="bi bi-arrow-up-circle-fill clickable" v-if="select_skill(selected_skill).image==2" @click="proficiencySkill()"></i>
                                        <b class="statmodifier" @click="setRollString('1d20'+nozero(skillModifier()))">{{skillModifier()}}</b>
                                    </div>
                                </div>

                                <div class = "card overflow-hidden shadow rounded-4 border-0 mb-5 dropdownCard">
                                    Class
                                    <div class="dropdownContainer">
                                        <input readonly = "true"class="fill" placeholder="Class" v-model="pg.class" @input="updated = true;">
                                    </div>
                                    <div >

                                    </div>
                                    <div class = "cardtitlerow">
                                            <div>  Class Points</div>  
                                            <div class = "attackdata clickable" @click= "pg.show_class_points = !pg.show_class_points; updated=true;" style = "padding-top: 0.15rem !important; padding-bottom: 0.15rem !important; margin: 0 !important;">
                                                <i class="bi bi-eye-fill" v-if="!pg.show_class_points" ></i><i class="bi bi-eye-slash-fill" v-if="pg.show_class_points"></i>
                                            </div>
                                        </div>
                                    <div class="hpbarContainer" v-if="pg.show_class_points">
                                        <div class="progressBar_outer">
                                            <div class="progressBar_inner" :style="widthStyleClassPoints()"></div>
                                        </div>
                                        <input readonly = "true"v-model="pg.class_points" @input="updated = true;" class="hp text-right" id="cp" type="number" :value="pg.class_points" @input="checkClassPoints()">/<input readonly = "true"v-model="pg.max_class_points" @input="updated = true;" class="hp" id = "max_cp" type="number" :value="pg.max_class_points" @input="checkClassPoints()"></i>
                                    </div>
                                </div>
                                <div class = "card overflow-hidden shadow rounded-4 border-0 mb-5 dropdownCard">
                                    Race
                                    <div class="dropdownContainer">
                                        <input readonly = "true"class="fill" placeholder="Race" v-model="pg.race" @input="updated = true;">
                                    </div>
                                    Background
                                    <div class="dropdownContainer">
                                        <input readonly = "true"class="fill" placeholder="Background" v-model="pg.background" @input="updated = true;">
                                    </div>
                                </div>
                                <div class = "card overflow-hidden shadow rounded-4 border-0 mb-5 statsCard">
                                    Inspiration
                                    <div class= "attackdata d-flex" >
                                        <i class="bi spellSlot bi-record-circle-fill block" v-for = "num in 4" v-if="num<=pg.ispirazione"></i>
                                        <i class="bi spellSlot bi-circle block" v-for = "num in 4" v-if="num<=(4-pg.ispirazione)"></i>
                                    </div>
                                    <div class = "d-flex justify-content-center">
                                        <div class = "attackdata clickable"  @click= "if(pg.ispirazione>0){pg.ispirazione = pg.ispirazione-1; updated = true;}">
                                            <i class="bi bi-dash-circle"></i>
                                        </div>
                                        <div class = "attackdata clickable" @click= "if(pg.ispirazione<4){pg.ispirazione = pg.ispirazione+1; updated = false;}">
                                            <i class="bi bi-plus-circle"></i>
                                        </div>
                                    </div>
                                </div>
                                
                            </div>
                            <div class="card overflow-hidden shadow rounded-4 border-0 mb-5 helpCard">
                                <div class="card-body p-0">
                                    <div class="p-4">
                                        <div class="d-flex" style = "align-items: center;">
                                            <div class="badge bg-gradient-primary-to-secondary text-white mb-4" style="margin: 0.5rem 0.5rem !important;"><div class="text-uppercase">Help</div></div><h4 class="fw-bolder">Other Character Informations</h4>
                                        </div>
                                        These last boxes are used to specify the Class, Race and Background of the character. By clicking on the <i class="bi bi-eye-slash-fill" v-if="pg.show_class_points"></i><i class="bi bi-eye-fill" v-if="!pg.show_class_points"></i> button one can <i v-if = pg.show_class_points>hide</i><i v-if = !pg.show_class_points>show</i> the bar meant to display class points (e.g. Ki Points, Sorcery Points.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- COMBAT CARD -->
                <div class="card overflow-hidden shadow rounded-4 border-0 mb-5" id = "combat">
                    <div class="card-body p-0">
                        <div class="p-5">
                            <h2 class="fw-bolder">Combat</h2>
                            <div class="card overflow-hidden shadow rounded-4 border-0 mb-5 helpCard">
                                <div class="card-body p-0">
                                    <div class="p-4">
                                        <div class="d-flex" style = "align-items: center;">
                                            <div class="badge bg-gradient-primary-to-secondary text-white mb-4" style="margin: 0.5rem 0.5rem !important;"><div class="text-uppercase">Help</div></div><h4 class="fw-bolder">Combat Stats</h4>
                                        </div>
                                        This section contains those stats which are the most important during a fight: all of them can be edited by clicking on their value. The three numbres in the Hit Points card represent, in order, the remaining, maximum and temporary HPs; clicking on the <i class="bi bi-plus-slash-minus"></i> icon hides/shows a utility to add/subtract a certain value from the remaining HPs. The dots in the "Savint Throws" box represent the failed ones (on the left) and the succeeded ones (on the right). Clicking one them cycles through their possible values. 

                                    </div>
                                </div>
                            </div>
                            <div class="d-flex-card align-items-center statsContainer">
                                <div class = "card overflow-hidden shadow rounded-4 border-0 mb-5 statsCard">
                                    Armor Class
                                    <input readonly = "true"class="statvalue" v-model="pg.ca" @input="updated = true;"></input>
                                </div>
                                <div class = "card overflow-hidden shadow rounded-4 border-0 mb-5 statsCard">
                                    <div @click="setRollString('1d20'+nozero(pg.init>0?'+'+pg.init:pg.init))">Initiative</div>
                                    <input readonly = "true"class="statvalue" v-model="pg.init" @input="updated = true;"></input>
                                </div>
                                <div class = "card overflow-hidden shadow rounded-4 border-0 mb-5 statsCard">
                                    Speed    
                                    <input readonly = "true"class="statvalue" v-model="pg.vel" @input="updated = true;"></input>
                                </div>
                                <div class = "card overflow-hidden shadow rounded-4 border-0 mb-5 dropdownCard">
                                    Hit Dice
                                    <div class ="d-flex">
                                        <input readonly = "true"class="statvalue-fixed" v-model="pg.dadi_vita_rimanenti" @input="updated = true;"></input>
                                        <div class = "statvalue">/</div>
                                        <input readonly = "true"class="statvalue-fixed" v-model="pg.dadi_vita_massimi" @input="updated = true;"></input>
                                    </div>
                                </div>
                                <div class = "card overflow-hidden shadow rounded-4 border-0 mb-5 largeDropdownCard">
                                    Hit Points
                                    <div class="hpbarContainer">
                                        <div class="progressBar_outer">
                                            <div class="progressBar_inner" :style="widthStyleHP()"></div>
                                        </div>
                                        <input readonly = "true"v-model="pg.hp" @input="updated = true;" class="hp" id="hp" type="number" :value="pg.hp" @input="checkHP()">/<input readonly = "true"v-model="pg.maxHP" @input="updated = true;" class="hp" id = "hpmax" type="number" :value="pg.maxHP" @input="checkHP()"> + <input readonly = "true"v-model="pg.tempHP" @input="updated = true;" class="hp" style="width:10%;" id = "hptemp" type="number" @input="checkHP()">
                                        <i class="bi bi-plus-slash-minus clickable" @click="modifyHP = !modifyHP;"></i>
                                    </div>
                                    <div class="hpbarContainer justify-content-end" v-if="modifyHP">
                                        <input readonly = "true"v-model="deltaHP" class="hp" id="hp" type="number" > 
                                        <div class = "attackdata clickable" @click= "addHP(+1)">
                                            <i class="bi bi-plus-circle" ></i>
                                        </div>
                                        <div class = "attackdata clickable" @click= "addHP(-1)">
                                            <i class="bi bi-dash-circle"></i>
                                        </div>
                                    </div>
                                </div>
                                <div class = "card overflow-hidden shadow rounded-4 border-0 mb-5 largeDropdownCard">
                                    Death Saving Throws
                                    <div class = "savingThrowsContainer" @click="">
                                        <div class="d-flex-card align-items-center space-evenly progressBar_outer margin-right-1rem clickable" @click="pg.ts_morte.fallimenti=(parseInt(pg.ts_morte.fallimenti)+1)%4;">
                                            <i class="bi" :class="tsMorteFail(3)"></i>
                                            <i class="bi" :class="tsMorteFail(2)"></i>
                                            <i class="bi" :class="tsMorteFail(1)"></i>
                                        </div>
                                        <div class="d-flex-card align-items-center space-evenly progressBar_outer margin-left-1rem clickable" @click="pg.ts_morte.successi=(parseInt(pg.ts_morte.successi)+1)%4;">
                                            <i class="bi" :class="tsMorteSuccess(1)"></i>
                                            <i class="bi" :class="tsMorteSuccess(2)"></i>
                                            <i class="bi" :class="tsMorteSuccess(3)"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="card overflow-hidden shadow rounded-4 border-0 mb-5 helpCard">
                                <div class="card-body p-0">
                                    <div class="p-4">
                                        <div class="d-flex" style = "align-items: center;">
                                            <div class="badge bg-gradient-primary-to-secondary text-white mb-4" style="margin: 0.5rem 0.5rem !important;"><div class="text-uppercase">Help</div></div><h4 class="fw-bolder">Attacks</h4>
                                        </div>
                                        The next table displays the possible ways of dealing damage. The <i class="bi bi-plus-circle" ></i> button adds a new empty attack, while the <i class="bi bi-x-circle " ></i> button on the beginning of each row removes that specific row from the table. The columns contain in order the name of the attack, its hit modifier, its damage and its damage type. 
                                    </div>
                                </div>
                            </div>
                            <div>
                                <div class = "card overflow-hidden shadow rounded-4 border-0 mb-5">
                                    <div class="card-body p0">
                                        <div class = "cardtitlerow">
                                            <div>  Attack Bonuses</div>  
                                            <div class = "attackdata clickable" @click= "appendEmptyAttack()">
                                                <i class="bi bi-plus-circle" ></i>
                                            </div>
                                        </div>
                                       
                                        <div class="attack" v-for="attack in pg.attack_bonus">
                                            <div class = "attackdata clickable" @click= "pg.attack_bonus = removeFromArray(attack, pg.attack_bonus)"> 
                                                <i class="bi bi-x-circle " ></i>
                                            </div>
                                            <input readonly = "true"type = text class = "attackdata" v-model="attack.name" @input="updated = true;" style="width: 35%;">
                                            <input readonly = "true"type = text class = "attackdata mergeright" v-model="attack.bonus" @input="updated = true;" style="width: 15%;">
                                            <div class = "attackdata clickable mergeleft" @click= "setRollString('1d20'+nozero(attack.bonus))"> 
                                                <i class="bi bi-dice-6 " ></i>
                                            </div>
                                            <input readonly = "true"type = text class = "attackdata mergeright" v-model="attack.danni" @input="updated = true;" style="width: 20%;">
                                            <div class = "attackdata clickable mergeleft" @click= "setRollString(attack.danni)"> 
                                                <i class="bi bi-dice-6 " ></i>
                                            </div>
                                            <input readonly = "true"type = text class = "attackdata" v-model="attack.tipo" @input="updated = true;" style="width: 25%;">
                                            
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- INVENTORY CARD -->
                <div class="card overflow-hidden shadow rounded-4 border-0 mb-5" id = "inventory">
                    <div class="card-body p-0">
                        <div class="p-5">
                            <h2 class="fw-bolder">Inventory</h2>
                            <div class="d-flex-card align-items-center statsContainer">
                                <div class = "card overflow-hidden shadow rounded-4 border-0 mb-5 statsCard" v-for = "money in pg.wallet">
                                    {{money.label}}
                                    <input readonly = "true"class="statvalue noarrows" type = "number" v-model="money.value" @input="updated = true;"></input>
                                </div>
                            </div>
                            <div class="card overflow-hidden shadow rounded-4 border-0 mb-5 helpCard">
                                <div class="card-body p-0">
                                    <div class="p-4">
                                        <div class="d-flex" style = "align-items: center;">
                                            <div class="badge bg-gradient-primary-to-secondary text-white mb-4" style="margin: 0.5rem 0.5rem !important;"><div class="text-uppercase">Help</div></div><h4 class="fw-bolder">Inventory</h4>
                                        </div>
                                        The inventory is simply a list of items which can be edited by clicking on them. The <i class="bi bi-plus-circle" ></i> button adds a new empty item, while the <i class="bi bi-x-circle " ></i> button on the beginning of each row removes that specific row from the list. The inventory is collapsable: click the <i class="bi bi-arrow-down-circle" v-if="hideInventory"></i><i class="bi bi-arrow-left-circle" v-if="!hideInventory"></i> to <i v-if="hideInventory">show</i><i v-if="!hideInventory">hide</i> the inventory.

                                    </div>
                                </div>
                            </div>
                            <div>
                                <div class = "card overflow-hidden shadow rounded-4 border-0 mb-5">
                                    <div class="card-body p0">
                                        <div class = "cardtitlerow">
                                            <div>  Inventory</div>  
                                            <div class= "cardtitlerow">
                                                <div class = "attackdata clickable" v-if="!hideInventory" @click= "pg.inventory.push(''); updated = true;">
                                                    <i class="bi bi-plus-circle" ></i>
                                                </div>
                                                <div class = "attackdata clickable" v-if="hideInventory" @click= "hideInventory = false;">
                                                    <i class="bi bi-arrow-down-circle"></i>
                                                </div>
                                                <div class = "attackdata clickable" v-if="!hideInventory" @click= "hideInventory = true;">
                                                    <i class="bi bi-arrow-left-circle"></i>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="attack" v-for="(item,index) in pg.inventory" v-if="!hideInventory">
                                            <div class = "attackdata" > 
                                                <i class="bi bi-x-circle clickable" @click= "pg.inventory = removeFromArray(item, pg.inventory); updated = true;"></i>
                                            </div>
                                            <input readonly = "true"type = text class = "attackdata" v-model="pg.inventory[index]" @input="updated = true;" style="width: 100%;">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Features  -->
                <div class="card overflow-hidden shadow rounded-4 border-0 mb-5" id = "features">
                    <div class="card-body p-0">
                        <div class="p-5">
                            <h2 class="fw-bolder">Features</h2>
                            <div class="card overflow-hidden shadow rounded-4 border-0 mb-5 helpCard">
                                <div class="card-body p-0">
                                    <div class="p-4">
                                        <div class="d-flex" style = "align-items: center;">
                                            <div class="badge bg-gradient-primary-to-secondary text-white mb-4" style="margin: 0.5rem 0.5rem !important;"><div class="text-uppercase">Help</div></div><h4 class="fw-bolder">Features and Traits</h4>
                                        </div>
                                        Each card works the same as the inventory, with some slightly changes in those displaying a <i class="bi bi-info-circle"></i> button: in this case the entry cannot be edited from the table and you need to open the info box to access more details and edit them. The "Limited Features and Traits" card has some unique features: the <i class="bi bi-arrow-counterclockwise"></i> button resets the uses of each feature to 0, while the counter can be clicked to increase the number displayed by one, up to the maximum showed on the right. Try clicking info button below.

                                    </div>
                                </div>
                            </div>
                            <div class = horizontalScroll>
                                <div class = "spellsContainer">
                                    <div class = "card overflow-hidden shadow rounded-4 border-0 mb-5 margin-left-1rem margin-right-1rem largeDropdownCard">
                                        <div class="card-body p0">
                                            <div class = "cardtitlerow">
                                                <div> Features and Traits </div>  
                                                <div class = "attackdata clickable" @click= "appendEmptyFeature()">
                                                    <i class="bi bi-plus-circle" ></i>
                                                </div>
                                            </div>
                                            <div class="attack" v-for="(trait,index) in pg.priv_tratti">
                                                <div class = "attackdata clickable" @click= "pg.priv_tratti = removeFromArray(trait, pg.priv_tratti); updated = true;"> 
                                                    <i class="bi bi-x-circle " ></i>
                                                </div>
                                                <div class = "attackdata" style="width: 100%;"> 
                                                    {{trait.name}}
                                                </div>
                                                <div class = "attackdata clickable"> 
                                                    <i class="bi bi-info-circle"></i>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class = "card overflow-hidden shadow rounded-4 border-0 mb-5 margin-left-1rem margin-right-1rem largeDropdownCard">
                                        <div class="card-body p0">
                                            <div class = "cardtitlerow">
                                                <div> Limited Features and Traits </div>  
                                                <div class="d-flex">
                                                    <div class = "attackdata clickable">
                                                        <i class="bi bi-arrow-counterclockwise"></i>
                                                    </div>
                                                    <div class = "attackdata clickable">
                                                        <i class="bi bi-plus-circle" ></i>
                                                    </div>
                                                </div>
                                            </div>
                                        
                                            <div class="attack" >
                                                <div class = "attackdata clickable" > 
                                                    <i class="bi bi-x-circle " ></i>
                                                </div>
                                                <div class = "attackdata" style="width: 100%;"> 
                                                    More infos about Limited Features
                                                </div>
                                                <div class = "attackdata clickable" style = "width: 15%; text-align: center;" @click= "trait.current_uses++; checkPTL(index); updated = true;"> 
                                                    1/2
                                                </div>
                                                <div class = "attackdata clickable" @click= "showPTLDescription = true;"> 
                                                    <i class="bi bi-info-circle"></i>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class = "card overflow-hidden shadow rounded-4 border-0 mb-5 margin-left-1rem margin-right-1rem largeDropdownCard">
                                        <div class="card-body p0">
                                            <div class = "cardtitlerow">
                                                <div> Languages </div>  
                                                <div class = "attackdata clickable" @click= "pg.languages.push(''); updated = true;">
                                                    <i class="bi bi-plus-circle" ></i>
                                                </div>
                                            </div>
                                            <div class="attack" v-for="(language,index) in pg.languages">
                                                <div class = "attackdata clickable" @click= "pg.languages = removeFromArray(language, pg.languages); updated = true;"> 
                                                    <i class="bi bi-x-circle " ></i>
                                                </div>
                                                <input readonly = "true"class = "attackdata clickable"  style="width: 100%;" v-model="pg.languages[index]"  @input="updated = true;">
                                            </div>
                                        </div>
                                    </div>
                                    <div class = "card overflow-hidden shadow rounded-4 border-0 mb-5 margin-left-1rem margin-right-1rem largeDropdownCard">
                                        <div class="card-body p0">
                                            <div class = "cardtitlerow">
                                                <div> Other Proficiencies </div>  
                                                <div class = "attackdata clickable" @click= "pg.other_comps.push('')">
                                                    <i class="bi bi-plus-circle" ></i>
                                                </div>
                                            </div>
                                            <div class="attack" v-for="(comp,index) in pg.other_comps">
                                                <div class = "attackdata clickable" @click= "pg.other_comps = removeFromArray(comp, pg.other_comps)"> 
                                                    <i class="bi bi-x-circle " ></i>
                                                </div>
                                                <input readonly = "true"class = "attackdata clickable"  style="width: 100%;" v-model = "pg.other_comps[index]">
                                            </div>
                                        </div>
                                    </div>
                                    <div class = "card overflow-hidden shadow rounded-4 border-0 mb-5 margin-left-1rem margin-right-1rem largeDropdownCard">
                                        <div class="card-body p0">
                                            <div class = "cardtitlerow">
                                                <div> Attuned Magical Objects </div>  
                                                <div class = "attackdata clickable" @click= "pg.attuned.push(''); updated = true;">
                                                    <i class="bi bi-plus-circle" ></i>
                                                </div>
                                            </div>
                                            <div class="attack" v-for="(obj,index) in pg.attuned">
                                                <div class = "attackdata clickable" @click= "pg.attuned = removeFromArray(obj, pg.attuned); updated = true;"> 
                                                    <i class="bi bi-x-circle " ></i>
                                                </div>
                                                <input readonly = "true"class = "attackdata clickable"  style="width: 100%;" v-model="pg.attuned[index]" @input="updated = true;">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- SPELLS  -->
                <div class="card overflow-hidden shadow rounded-4 border-0 mb-5" id = "spells">
                    <div class="card-body p-0">
                        <div class="p-5">
                            <div class = cardtitlerow>
                                <h2 class="fw-bolder">Spells</h2>
                                
                                <div class= "d-flex">
                                    <select id = "castingStat" class = "attackdata clickable" v-model="pg.castingStat" @click = "updated = true">
                                        <option value = "str"> Strength </option>
                                        <option value = "dex"> Dexterity </option>
                                        <option value = "con"> Constitution </option>
                                        <option value = "int"> Intelligence </option>
                                        <option value = "wis"> Wisdom </option>
                                        <option value = "cha"> Charisma </option>
                                    </select>
                                    <div class = "attackdata clickable" @click="setRollString('1d20'+nozero(spellMod()))"> 
                                        {{spellMod()}}
                                    </div>
                                    <div class = attackdata>
                                        {{spellTS()}}
                                    </div>
                                    <div class = "attackdata clickable"  @click= "resetSlots()">
                                        <i class="bi bi-arrow-counterclockwise"></i>
                                    </div>
                                    <div class = "attackdata clickable"  @click= "showSpellsSettings = true;">
                                        <i class="bi bi-gear-fill"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="card overflow-hidden shadow rounded-4 border-0 mb-5 helpCard">
                                <div class="card-body p-0">
                                    <div class="p-4">
                                        <div class="d-flex" style = "align-items: center;">
                                            <div class="badge bg-gradient-primary-to-secondary text-white mb-4" style="margin: 0.5rem 0.5rem !important;"><div class="text-uppercase">Help</div></div><h4 class="fw-bolder">Spells</h4>
                                        </div>
                                        This card is about spellcasting. In the card header the user can specify the character's casting stat: the attack bonus and the DC are automatically computed. The <i class="bi bi-arrow-counterclockwise"></i> resets all spells uses, while the <i class="bi bi-gear-fill"></i> button opens the spells settings (try clicking on it!). In the body, a card is displayed if the character has slots or knows spells of that specific level. The dots near the level name represent the available/used slots. The circle near the spell name represents if it is prepared or not, while the <i class="bi bi-info-circle"></i> button opens the spell description.
                                    </div>
                                </div>
                            </div>
                            <div class = horizontalScroll>
                                <div class = spellsContainer>
                                    <div class = "card overflow-hidden shadow rounded-4 border-0 mb-5 dropdownCard margin-left-1rem margin-right-1rem" v-for = "level in pg.slots" v-if="level.known>0||level.max>0">
                                        <div class = "cardtitlerow">
                                            <div>  {{level.level==0?"Cantrip":"Level "+level.level}}</div>  
                                            <div class= "cardtitlerow" v-if = "level.level>0 && level.max>0">
                                                <div class= "attackdata d-flex" >
                                                    <i class="bi spellSlot bi-record-circle-fill block" v-for = "num in 4" v-if="num<=level.used"></i>
                                                    <i class="bi spellSlot bi-circle block" v-for = "num in 4" v-if="num<=(level.max-level.used)"></i>
                                                </div>
                                                <div class = "attackdata clickable"  @click= "if(level.used>0){level.used = level.used-1;}; updated = true;">
                                                    <i class="bi bi-dash-circle"></i>
                                                </div>
                                                <div class = "attackdata clickable" @click= "if(level.used<level.max){level.used = level.used+1;}; updated = true;">
                                                    <i class="bi bi-plus-circle"></i>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- <div class = "spell" v-for="(spell,index) in spells_print" v-if="spell.level == level"><input readonly = "true"type="checkbox" class="slotsButton" v-model = "spell.prepared">{{spell.name}} <b class = "infobutton" @click="showInfo(index)">â</b></div>    -->
                                        <div class="attack" v-for="(spell,index) in spells_print" v-if="spell.level == level.level">
                                            <div class = "attackdata clickable" @click = "changePrepared(spell, index); updated = true;" v-if ="level.level>0"> 
                                                <i class="bi bi-circle" v-if="!spells_print[index].prepared"></i>
                                                <i class="bi bi-record-circle-fill" v-if="spells_print[index].prepared"></i>
                                            </div>
                                            <div class = "attackdata" style="width: 100%;"> 
                                                {{spell.name}}
                                            </div>
                                            <div class = "attackdata clickable" @click= "showInfo(index)"> 
                                                <i class="bi bi-info-circle"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- SPELLS MODAL -->
                <modal v-if="showSpellDescription" @close="showSpellDescription = false" >
                    <h3 slot="header" class="nomarginbottom padding-left-1rem">{{spells_print[selected_spell].name}} </h3>
                    <h6 slot="school">Scuola di {{spells_print[selected_spell].school}}</h6>
                    <div slot="body">
                        <b class="spellitem">Level:</b> {{spells_print[selected_spell].level==0?'Cantrip':spells_print[selected_spell].level}} <br>
                        <b class="spellitem">Launch time:</b> {{spells_print[selected_spell].time}} <br>
                        <b class="spellitem">Range:</b> {{spells_print[selected_spell].range}} <br>
                        <b class="spellitem">Components:</b> {{spells_print[selected_spell].components}} <br>
                        <b class="spellitem">Duration:</b> {{spells_print[selected_spell].duration}} <br>
                        <b class="spellitem">Damage:</b> {{spells_print[selected_spell].damage==''?'--':spells_print[selected_spell].damage}} <br>
                        <p class =spell_description></p>
                        <p class="spell_description">{{spells_print[selected_spell].description}}</p>
                        <p class="spell_description"><b class="spellitem">At higher levels:</b> {{spells_print[selected_spell].higher_lv}}</p>
                        <b class="spellitem">Manual:</b> {{spells_print[selected_spell].manual}} 
                    </div>
                </modal>

                <!-- TRAITS MODAL -->
                <modal v-if="showPTDescription" @close="showPTDescription = false;" >
                    <h3 slot="header" class="nomarginbottom padding-left-1rem"><input readonly = "true"v-model =pg.priv_tratti[selected_PT].name placeholder="Name" @input="updated = true;"> </h3>
                    <div slot="body">
                        <textarea class=large v-model="pg.priv_tratti[selected_PT].description" @input="updated = true;">

                        </textarea>
                    </div>
                </modal>

                <!-- LIMITED TRAITS MODAL -->
                <modal v-if="showPTLDescription" @close="showPTLDescription = false;" >
                    <h3 slot="header" class="nomarginbottom padding-left-1rem"><input readonly = "true"  placeholder="Name" value = "Limited Features"> </h3>
                    <h6 slot="school">Recharges every <input readonly = "true"style="background-color: none;" value = "SR"></h6>
                    <div slot="body">
                        <div class="d-flex-card align-items-center justify-content-between">
                            <div class = "card overflow-hidden shadow rounded-4 border-0 mb-5" >
                                <div class="hpbarContainer justify-content-center">
                                    <input readonly = "true" class="hp text-right"  type="number" value = 1>/<input readonly = "true" class="hp"  type="number" value = 2></i>
                                </div>
                            </div>
                        </div>
                        <div class="card overflow-hidden shadow rounded-4 border-0 mb-5 helpCard">
                            <div class="card-body p-0">
                                <div class="p-4">
                                    <div class="d-flex" style = "align-items: center;">
                                        <div class="badge bg-gradient-primary-to-secondary text-white mb-4" style="margin: 0.5rem 0.5rem !important;"><div class="text-uppercase">Help</div></div><h4 class="fw-bolder">Info Boxes</h4>
                                    </div>
                                    These boxes contain more details about each Feature/Trait. They all share a text input for the name (on top) and a text area for more details. In the case of the Limited Features/Traits more details are available: a slot to specify how often the feature is recharged, one to specify how many time it has been used and one to specify the maximum number of uses.

                                </div>
                            </div>
                        </div>
                    </div>
                </modal>
                <!-- SPELL SELECTION MODAL -->
                <modal v-if="showSpellsSettings" @close="showSpellsSettings = false;" >
                    <h3 slot="header" class="nomarginbottom padding-left-1rem">Spells Settings </h3>
                    <div slot="body">
                        <div class="card overflow-hidden shadow rounded-4 border-0 mb-5 helpCard">
                            <div class="card-body p-0">
                                <div class="p-4">
                                    <div class="d-flex" style = "align-items: center;">
                                        <div class="badge bg-gradient-primary-to-secondary text-white mb-4" style="margin: 0.5rem 0.5rem !important;"><div class="text-uppercase">Help</div></div><h4 class="fw-bolder">Spells Settings</h4>
                                    </div>
                                    In this window yoiu can change the number of slots available for each level and add/remove a spell from the list of the known one. To do so, write the spell name in the form and click the button on the left hand side. The spells are available only in italian (sorry!).
                                </div>
                            </div>
                        </div>
                        <h5>Spells Slots</h5>
                        <div class="horizontalScroll">
                            <div class="spellsContainer">
                                <div v-for="level in pg.slots" v-if="level.level>0">
                                    
                                    <div class = "attackdata text-center" > 
                                        {{level.level}}
                                    </div>
                                    <input readonly = "true"class = "attackdata clickable text-center" style = "width:4rem;" type = number v-model = "level.max" @input="checkSlots(level)" @input="updated = true;">
                                </div>
                            </div>
                        </div>
                        <p></p>
                        <h5>Add Spell</h5>
                        <div class = "attackdata" @click= "addSpell()">
                            <i class="bi bi-plus-circle clickable margin-right-1rem margin-left-1rem" ></i> 
                                <input readonly = "true"class="attackdata" style = "width: 85%" list="addSpells" placeholder="Spell Name" v-model="spellToAdd">
                            <datalist id="addSpells">
                                <select>
                                    <option v-for="spell in allSpells" :value="spell.name">{{spell.name}}
                                </select>
                            </datalist>
                        </div>
                        <p></p>
                        <h5>Remove Spell</h5>
                        <div class = "attackdata clickable" >
                            <i class="bi bi-x-circle margin-right-1rem margin-left-1rem" @click= "removeSpell()" ></i>
                            <input readonly = "true"class="attackdata" style = "width: 85%" list="removeSpells" placeholder="Spell Name" v-model="spellToRemove">
                            <datalist id="removeSpells">
                                <select>
                                    <option v-for="spell in spells_print" :value="spell.name">{{spell.name}}
                                </select>
                            </datalist> 
                        </div>
                    </div>
                </modal>
            </div>
        </main>
        <!-- Footer-->
        <footer class="bg-white py-3 mt-auto">
            <div class="container px-5">
                <div class="row align-items-center justify-content-between flex-column flex-sm-row">
                    <div class="col-auto"><div class="small m-0">Copyright &copy; Davide Borra 2025</div></div>
                    <div class="col-auto onlyOnLargerScreens">
                        <div class="d-flex">
                            <button class="bi bi-x-circle noborder diceRollerButton mergeright" onclick= "resetRolls()" ></button>
                            <input readonly = "true" class="diceRoller diceRollerContainer mergeleft" placeholder="Roll..." id = "rollString">
                            <button class = "diceRollerButton noborder" onclick= "roll()">
                                <i class="bi bi-dice-6-fill"></i>
                            </button>
                            <div class = "diceRollerResult" id = "rollResult">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </footer>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="../js/script.js"></script>
        <script src="../js/help.js"></script>
        <script src="../js/diceRoller.js"></script>
    </body>
</html>
